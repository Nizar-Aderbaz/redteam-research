# Code Breakdown - Simple Explanation

## What This Code Does
This program demonstrates how a Windows executable can delete itself from disk while it's still running.

## The Key Concept
When a file is running, Windows locks it. This technique bypasses that by:
1. **Renaming** the file's data to an alternate stream
2. **Deleting** that alternate stream
3. Using special file handle permissions

## Main Components

### 1. SelfDelete() Function
**The main deletion logic:**
- Gets the current executable's file path
- Renames the file's main data stream to `:NEWDATA` (alternate stream)
- Deletes the renamed stream
- Includes fallback methods if the primary technique fails

### 2. File Stream Renaming
The magic happens here:
```c
// Rename :$DATA (main stream) to :NEWDATA (alternate stream)
SetFileInformationByHandle(hFile, FileRenameInfo, pRename, sRename);
```
---

### 3. Safe Operations
- Multiple fallback attempts
- Proper error checking
- Memory cleanup
- Handle management

---

### Step-by-Step Process
- **Find Itself**: Gets its own file location
- **Rename Stream**: Changes main data stream to alternate stream
- **Delete Stream**: Removes the alternate stream
- **Clean Up**: Closes handles and frees memory

---

### Safety Features
- ✅ Multiple deletion attempts
- ✅ Proper error handling
- ✅ Memory cleanup
- ✅ Fallback methods

---
