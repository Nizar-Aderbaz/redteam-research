# Functions Explanation

## WriteShellInReg() - The Storage Function

**What it does:** Saves data to Windows Registry

**How it works:**
- Creates a safe place in registry: `Software\MySafeDemo`
- Stores our data as binary information
- Names the storage "nizar"
- Closes the registry properly when done

**Key features:**
- Uses `RegCreateKeyExA` to create the storage location
- Uses `RegSetValueExA` to save the actual data
- Always cleans up by closing the registry handle

## ReadShellInReg() - The Retrieval Function

**What it does:** Reads stored data back from registry

**How it works:**
- Opens the same registry location we created earlier
- Checks how much data was stored
- Allocates memory to hold the retrieved data
- Reads the data into memory
- Returns the data and its size

**Key features:**
- Uses `RegOpenKeyExA` to access the registry
- Uses `RegQueryValueExA` twice: first to check size, then to read data
- Uses `HeapAlloc` to safely allocate memory
- Verifies the data type is correct (REG_BINARY)

## RunShellInReg_SafePrint() - The Display Function

**What it does:** Shows what was stored in registry

**How it works:**
- Takes the retrieved data and displays it as hexadecimal numbers
- If the data ends with a null character, also shows it as text
- Never executes the data - only displays it

**Key features:**
- Completely safe - no code execution
- Shows data in both hex and readable format
- Perfect for verification and learning

## main() - The Coordinator

**What it does:** Ties everything together

**How it works:**
1. Calls `WriteShellInReg` to save sample data
2. Calls `ReadShellInReg` to retrieve the data
3. Calls `RunShellInReg_SafePrint` to display the results
4. Cleans up memory and waits for user input

**Flow:**
Save → Retrieve → Display → Cleanup

## Why These Functions Matter

Each function has a clear, single purpose:
- **WriteShellInReg**: Handles saving data
- **ReadShellInReg**: Handles reading data  
- **RunShellInReg_SafePrint**: Handles safe display
- **main**: Coordinates the whole process
